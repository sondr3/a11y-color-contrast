import { test } from "vitest";
import { type Rating, apcaToInterpolatedFont } from "./apca_tables.js";

const fixtures: [number, Rating[]][] = [
	[
		15.8,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		17.54,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		19.16,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		19.22,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		21.21,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		20.52,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		23.47,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		24.76,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		24.12,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		26.84,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		25.62,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		28.91,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		23.65,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		28.95,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[29.94, ["placeholder", "placeholder", "placeholder", 108, 108, 96, 72, 72, 72]],
	[
		28.56,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		24.99,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[32.36, ["placeholder", "placeholder", 114, 102, 91, 79, 61, 61, 61]],
	[33.49, ["placeholder", "placeholder", 112, 100, 83, 71, 55, 55, 55]],
	[
		27.78,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[35.41, ["placeholder", 119, 107, 93, 70, 59, 47, 47, 47]],
	[31.25, ["placeholder", "placeholder", 117, 105, 99, 87, 66, 66, 66]],
	[33.44, ["placeholder", "placeholder", 112, 100, 83, 71, 55, 55, 55]],
	[32.87, ["placeholder", "placeholder", 113, 101, 87, 75, 58, 58, 58]],
	[40.34, [119, 107, 94, 59, 47, 41, 31, 31, 31]],
	[42.12, [115, 103, 86, 52, 41, 36, 29, 29, 29]],
	[43.47, [112, 100, 79, 48, 37, 32, 26, 26, 26]],
	[44.53, [109, 97, 74, 44, 34, 29, 25, 25, 25]],
	[43.9, [111, 99, 77, 46, 36, 31, 26, 26, 26]],
	[46.68, [104, 88, 68, 39, 31, 27, 23, 23, 23]],
	[43.93, [111, 99, 77, 46, 35, 31, 26, 26, 26]],
	[42.92, [113, 101, 82, 49, 39, 34, 27, 27, 27]],
	[40.44, [119, 107, 94, 58, 47, 41, 31, 31, 31]],
	[50.29, [95, 71, 59, 32, 28, 24, 21, 21, 21]],
	[51.39, [92, 69, 57, 31, 27, 23.5, 20.5, 20.5, 20.5]],
	[50.7, [94, 70, 58, 31, 27, 24, 21, 21, 21]],
	[54.21, [83, 62, 50, 29, 25, 21.5, 18.5, 18.5, 18.5]],
	[54.81, [81, 60, 48, 28, 24, 21.5, 18.5, 18.5, 18.5]],
	[56.8, [77, 56, 46, 27, 23, 20, 17.5, 17.5, 18]],
	[55.86, [79, 58, 47, 27, 23.5, 20.5, 18, 18, 18]],
	[56.12, [78, 57, 47, 27, 23.5, 20.5, 18, 18, 18]],
	[59.79, [72, 49, 42, 24, 21.5, 18.5, 16.5, 16.5, 18]],
	[60.2, [72, 48, 42, 24, 21, 18, 16, 16, 18]],
	[60.35, [72, 48, 41, 24, 21, 18, 16, 16, 18]],
	[62.14, [70, 47, 38, 23.5, 20.5, 18, 16, 16, 18]],
	[63.9, [69, 46, 34, 22.5, 19.5, 17.5, 15.5, 16, 18]],
	[63.29, [69, 47, 35, 23, 20, 17.5, 15.5, 16, 18]],
	[64.72, [68, 46, 33, 22, 19.5, 17.5, 15.5, 16, 18]],
	[66.52, [67, 45, 31, 21.25, 19, 17, 15, 16, 18]],
	[62.75, [70, 47, 37, 23, 20, 17.5, 15.5, 16, 18]],
	[62.47, [70, 47, 37, 23, 20.5, 18, 16, 16, 18]],
	[64.15, [69, 46, 34, 22.5, 19.5, 17.5, 15.5, 16, 18]],
	[67.67, [66, 45, 30, 20.75, 18.5, 16.5, 15, 16, 18]],
	[69.25, [65, 44, 29, 20.25, 18.5, 16.5, 15, 16, 18]],
	[70.02, [64, 44, 28, 19.5, 18, 16, 14.5, 16, 18]],
	[71.03, [63, 44, 27, 19.5, 18, 16, 14.5, 16, 18]],
	[72.57, [62, 43, 26, 19, 17, 15.5, 14.5, 16, 18]],
	[72.5, [62, 43, 26, 19, 17, 15.5, 14.5, 16, 18]],
	[72.71, [62, 43, 26, 19, 17, 15.5, 14.5, 16, 18]],
	[74.67, [60, 42, 24, 18.5, 16.5, 15.5, 14.5, 16, 18]],
	[78.35, [57, 39, 23.5, 17.5, 16, 15, 14, 16, 18]],
	[79.72, [56, 38, 23.5, 17.5, 16, 15, 14, 16, 18]],
	[79.07, [57, 39, 23.5, 17.5, 16, 15, 14, 16, 18]],
	[80.5, [56, 38, 23, 17.25, 15.81, 14.81, 14, 16, 18]],
	[82.28, [54, 37, 23, 17.25, 15.81, 14.81, 14, 16, 18]],
	[83.59, [53, 36, 22.5, 16.75, 15.81, 14.81, 14, 16, 18]],
	[84.18, [53, 35, 22.5, 16.75, 15.81, 14.81, 14, 16, 18]],
	[84.75, [52, 35, 22.5, 16.75, 15.81, 14.81, 14, 16, 18]],
	[83.89, [53, 35, 22.5, 16.75, 15.81, 14.81, 14, 16, 18]],
	[86.12, [51, 34, 22, 16.5, 15.625, 14.625, 14, 16, 18]],
	[86.73, [51, 34, 22, 16.5, 15.625, 14.625, 14, 16, 18]],
	[86.8, [51, 34, 22, 16.5, 15.625, 14.625, 14, 16, 18]],
	[89.48, [48, 32, 21.5, 16.5, 15.625, 14.625, 14, 16, 18]],
	[90.78, [48, 31, 21, 16, 15.5, 14.5, 14, 16, 18]],
	[91.93, [47, 30, 20.5, 16, 15.5, 14.5, 14, 16, 18]],
	[92.27, [47, 30, 20.5, 16, 15.5, 14.5, 14, 16, 18]],
	[92.99, [46, 30, 20.5, 16, 15.5, 14.5, 14, 16, 18]],
	[91.05, [47, 31, 21, 16, 15.5, 14.5, 14, 16, 18]],
	[95.31, [45, 28, 19.5, 15.5, 15, 14, 13.5, 16, 18]],
	[95.35, [45, 28, 19.5, 15.5, 15, 14, 13.5, 16, 18]],
	[96.01, [44, 28, 19.5, 15.5, 15, 14, 13.5, 16, 18]],
	[96.13, [44, 28, 19.5, 15.5, 15, 14, 13.5, 16, 18]],
	[93.19, [46, 29, 20.5, 16, 15.5, 14.5, 14, 16, 18]],
	[96.67, [44, 27, 19.5, 15.5, 15, 14, 13.5, 16, 18]],
	[
		23.04,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		23.67,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[
		29.0,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[55.17, [80, 60, 48, 28, 24, 21, 18, 18, 18]],
	[59.02, [74, 50, 43, 25, 22, 19, 16.5, 16.5, 18]],
	[61.32, [71, 47, 39, 23.5, 20.5, 18, 16, 16, 18]],
	[62.36, [70, 47, 37, 23, 20.5, 18, 16, 16, 18]],
	[66.02, [67, 46, 31, 21.75, 19, 17, 15, 16, 18]],
	[72.45, [62, 43, 26, 19, 17.5, 16, 14.5, 16, 18]],
	[73.9, [61, 42, 25, 18.5, 16.5, 15.5, 14.5, 16, 18]],
	[74.11, [61, 42, 25, 18.5, 16.5, 15.5, 14.5, 16, 18]],
	[
		25.06,
		[
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
			"placeholder",
		],
	],
	[80.81, [55, 38, 23, 17.25, 15.81, 14.81, 14, 16, 18]],
	[81.39, [55, 37, 23, 17.25, 15.81, 14.81, 14, 16, 18]],
	[91.42, [47, 31, 21, 16, 15.5, 14.5, 14, 16, 18]],
	[92.61, [46, 30, 20.5, 16, 15.5, 14.5, 14, 16, 18]],
];

test("apcaToInterpolatecFont matches reference implementation", ({ expect }) => {
	for (const [apca, expected] of fixtures) {
		expect(apcaToInterpolatedFont(apca)).toStrictEqual(expected);
	}
});
